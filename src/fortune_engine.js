
// Fortune Engine 3.0 (Grand Master Edition)
// 🌌 Western: Planetary Transits & Aspects (Astrology)
// 📜 Eastern: Daily Stem/Branch Iljin & Five Elements (Saju)
// ✨ Lucky Prescription: Color, Item, Number, Direction

// =============================================================================
// SECTION 1: WESTERN ASTROLOGY DATA (PLANETS & ZODIAC)
// =============================================================================

const ZODIAC_SIGNS = {
    "양자리": { element: "fire", ruler: "mars", traits: ["개척", "용기", "직관"] },
    "황소자리": { element: "earth", ruler: "venus", traits: ["안정", "감각", "끈기"] },
    "쌍둥이자리": { element: "air", ruler: "mercury", traits: ["소통", "호기심", "재치"] },
    "게자리": { element: "water", ruler: "moon", traits: ["감성", "보호", "공감"] },
    "사자자리": { element: "fire", ruler: "sun", traits: ["표현", "자존감", "열정"] },
    "처녀자리": { element: "earth", ruler: "mercury", traits: ["분석", "봉사", "디테일"] },
    "천칭자리": { element: "air", ruler: "venus", traits: ["조화", "관계", "미학"] },
    "전갈자리": { element: "water", ruler: "pluto", traits: ["통찰", "집중", "비밀"] },
    "사수자리": { element: "fire", ruler: "jupiter", traits: ["모험", "철학", "낙관"] },
    "염소자리": { element: "earth", ruler: "saturn", traits: ["구조", "책임", "야망"] },
    "물병자리": { element: "air", ruler: "uranus", traits: ["혁신", "이성", "독창"] },
    "물고기자리": { element: "water", ruler: "neptune", traits: ["꿈", "영감", "희생"] }
};

const PLANETARY_ASPECTS = [
    { name: "수성 역행 (Mercury Retrograde)", type: "challenge", desc: "소통의 오해와 전자기기 오류를 조심해야 하는 시기" },
    { name: "금성의 미소 (Venus Trine)", type: "harmony", desc: "사랑과 예술, 금전적인 흐름이 부드러워지는 시기" },
    { name: "화성의 질주 (Mars Conjunct)", type: "energy", desc: "행동력이 폭발하고 추진력이 강해지는 시기" },
    { name: "목성의 축복 (Jupiter Expansion)", type: "luck", desc: "작은 노력이 크게 확장되어 돌아오는 행운의 시기" },
    { name: "토성의 교훈 (Saturn Return)", type: "serious", desc: "현실을 직시하고 내실을 다져야 하는 성숙의 시기" },
    { name: "달의 차오름 (Full Moon Energy)", type: "emotion", desc: "내면의 감정이 고조되고 무의식이 깨어나는 시기" },
    { name: "태양의 입궁 (Solar Return)", type: "vitality", desc: "자신감이 넘치고 존재감이 드러나는 빛의 시기" }
];

// =============================================================================
// SECTION 2: EASTERN SAJU DATA (ILJIN & 5 ELEMENTS)
// =============================================================================

const FIVE_ELEMENTS = {
    "wood": { name: "목(木)", quality: "성장/시작", color: "청색" },
    "fire": { name: "화(火)", quality: "확산/열정", color: "적색" },
    "earth": { name: "토(土)", quality: "중재/변화", color: "황색" },
    "metal": { name: "금(金)", quality: "결실/냉철", color: "백색" },
    "water": { name: "수(水)", quality: "지혜/휴식", color: "흑색" }
};

const ORIENTAL_ZODIAC = {
    "쥐띠": "water", "소띠": "earth", "호랑이띠": "wood", "토끼띠": "wood",
    "용띠": "earth", "뱀띠": "fire", "말띠": "fire", "양띠": "earth",
    "원숭이띠": "metal", "닭띠": "metal", "개띠": "earth", "돼지띠": "water"
};

// =============================================================================
// SECTION 3: MASSIVE TEMPLATES (5X EXPANSION)
// =============================================================================

const WESTERN_TEMPLATES = {
    // 1. Transit Intro (행성의 움직임)
    transits: [
        "하늘의 별들이 당신의 차트를 부드럽게 감싸고 있습니다.",
        "멀리서 행성의 에너지가 강렬하게 진동하는 날입니다.",
        "별들의 배치가 고요하여 내면을 들여다보기 좋은 밤입니다.",
        "우주의 리듬이 당신의 맥박과 공명하며 춤을 춥니다.",
        "행성들이 각을 이루며 새로운 기회의 문을 두드리고 있습니다.",
        "별빛이 희미하지만, 그만큼 당신의 내면의 빛이 중요한 날입니다.",
        "천체의 움직임이 분주하여 예상치 못한 소식이 올 수 있습니다.",
        "보이지 않는 중력이 당신을 올바른 궤도로 이끌어줍니다.",
        "은하수의 흐름이 당신의 무의식을 자극하는 신비로운 날입니다.",
        "행성들이 춤을 추듯 정렬하여 당신에게 영감을 불어넣습니다.",
        "우주의 거대한 시계가 당신을 위해 특별한 시간을 가리킵니다.",
        "먼 별에서 온 오래된 빛이 당신의 지혜를 깨웁니다.",
        "천상의 하모니가 당신의 일상에 잔잔한 파동을 일으킵니다.",
        "별들의 속삭임이 바람을 타고 당신에게 전해집니다.",
        "행성들의 에너지가 소용돌이치며 변화를 예고합니다.",
        "고요한 밤하늘처럼 당신의 마음도 깊고 넓어지는 날입니다.",
        "유성우가 쏟아지듯 번뜩이는 아이디어가 스쳐 지나갑니다.",
        "태양계의 기운이 당신의 등을 든든하게 받쳐주고 있습니다.",
        "달의 인력이 당신의 감정을 부드럽게 어루만집니다.",
        "금성의 빛이 당신의 일상을 아름답게 물들입니다.",
        "화성의 열기가 당신의 심장을 뜨겁게 만드는 날입니다.",
        "목성의 관대함이 당신에게 여유를 선물합니다.",
        "토성의 엄격함이 당신을 단단하게 성장시킵니다.",
        "천왕성의 번개 같은 에너지가 일상의 권태를 깨뜨립니다.",
        "해왕성의 안개 속에서 진실한 꿈을 발견하게 됩니다.",
        "명왕성의 깊은 힘이 당신의 잠재력을 끌어올립니다.",
        "별자리의 이동이 당신에게 새로운 방향을 제시합니다.",
        "우주의 에너지가 당신을 중심으로 회전하는 듯한 날입니다.",
        "천체의 운행이 당신의 바이오리듬과 완벽한 조화를 이룹니다.",
        "밤하늘의 지도가 당신의 앞길을 비추는 나침반이 됩니다.",
        "우주의 침묵 속에서 당신만의 해답을 찾을 수 있습니다.",
        "행성들의 배치가 마치 당신을 위한 무대를 준비한 듯합니다."
    ],
    // 2. Element Advice (Condition-based - 4 types per element)
    // Structure: { element: { active: [], calm: [], caution: [], neutral: [] } }
    adviceLogic: {
        fire: {
            active: [
                "지금은 망설임보다는 불꽃같은 행동이 필요한 순간입니다.",
                "에너지가 넘칩니다. 운동이나 새로운 프로젝트로 발산하세요.",
                "도전하는 것을 두려워하지 마세요. 불은 멈추면 꺼집니다.",
                "경쟁을 즐기세요. 당신은 승리할 준비가 되어 있습니다.",
                "목표를 향해 화살처럼 직진하세요. 지금은 집중할 때입니다.",
                "당신의 열정이 주변을 따뜻하게 데우는 등불이 되어줍니다.",
                "직관을 믿으세요. 논리보다 당신의 첫 느낌이 정답입니다.",
                "솔직하고 당당한 태도가 오히려 복잡한 문제를 단순하게 만듭니다."
            ],
            calm: [
                "열정의 온도를 조절하세요. 너무 뜨거우면 지칠 수 있습니다.",
                "자신의 주장을 명확히 하되, 상대방의 마음도 헤아리세요.",
                "잠시 숨을 고르고 내면의 불꽃을 응시하는 시간이 필요합니다.",
                "따뜻한 차 한 잔으로 흥분된 마음을 가라앉히세요.",
                "타오르는 불길보다는 은은한 촛불처럼 주변을 밝히세요.",
                "감정적인 폭발을 주의하세요. 차분함이 이기는 길입니다.",
                "작은 불씨가 큰 불이 되듯, 사소한 시작이 중요합니다."
            ],
            caution: [
                "성급한 결정은 화를 부를 수 있으니 한 템포 늦추세요.",
                "의욕이 앞서 실수를 할 수 있으니 돌다리도 두들겨 보세요.",
                "무모한 도전보다는 안전한 선택이 필요한 날입니다.",
                "타인과의 불필요한 마찰을 피하세요. 불은 재앙이 될 수도 있습니다.",
                "자신감을 자만심으로 착각하지 않도록 경계해세요."
            ],
            neutral: [
                "당신의 카리스마가 사람들을 이끄는 강력한 힘이 됩니다.",
                "당신의 용기가 누군가에게는 큰 희망이 될 수 있습니다.",
                "솔직한 감정 표현이 오해를 풀고 관계를 개선합니다.",
                "창조적인 에너지가 폭발하는 시기니 예술적인 활동을 해보세요.",
                "낙관적인 태도가 막힌 길을 뚫어주는 열쇠가 됩니다."
            ]
        },
        earth: {
            active: [
                "현실적인 계획이 빛을 발합니다. 숫자를 꼼꼼히 확인하세요.",
                "눈에 보이는 결과물이 나오는 날입니다. 마지막까지 디테일을 챙기세요.",
                "구체적인 목표를 세우고 하나씩 체크해 나가는 기쁨을 누리세요.",
                "기반을 다지는 시기입니다. 기초공사가 튼튼해야 높이 쌓습니다.",
                "실용적인 접근이 복잡한 문제를 해결하는 열쇠입니다.",
                "꾸준함이 비범함을 만듭니다. 오늘 한 걸음이 중요합니다.",
                "약속은 반드시 지키세요. 신뢰가 당신의 가장 큰 자산입니다."
            ],
            calm: [
                "서두르지 마세요. 대지처럼 굳건하게 자리를 지키는 것이 이깁니다.",
                "자연과 가까이 하세요. 흙의 기운이 당신을 충전해줍니다.",
                "안정을 추구하는 것이 겁쟁이가 아님을 명심하세요.",
                "인내심을 가지세요. 씨앗이 싹트기까지는 시간이 필요합니다.",
                "단순하고 소박한 삶의 방식에서 진정한 행복을 찾으세요.",
                "몸의 감각에 집중하세요. 맛있는 음식이나 편안한 휴식이 필요합니다.",
                "물질적인 풍요로움보다 마음의 여유를 먼저 챙기세요."
            ],
            caution: [
                "오래된 물건을 정리하거나 재정 상태를 점검하기 딱 좋은 날입니다.",
                "전통과 규칙을 존중하는 것이 오늘은 유리하게 작용합니다.",
                "무리한 변화보다는 현재의 안정을 유지하는 것이 좋습니다.",
                "고집을 조금 꺾으면 의외로 일이 쉽게 풀립니다.",
                "변화를 거부하면 고립될 수 있습니다. 유연해지세요."
            ],
            neutral: [
                "당신의 꼼꼼함이 위기를 미리 방지할 것입니다.",
                "책임감 있는 태도가 주위의 인정을 받게 합니다.",
                "손으로 무언가를 만드는 취미가 힐링이 될 수 있습니다.",
                "타인의 평가보다 스스로의 만족감이 더 중요한 날입니다.",
                "신중함은 당신의 가장 큰 무기입니다."
            ]
        },
        air: {
            active: [
                "새로운 정보가 바람을 타고 옵니다. 귀를 열어두세요.",
                "대화가 해결책입니다. 혼자 고민하지 말고 주변에 물어보세요.",
                "소통의 창구가 열려있습니다. 오해를 풀기에 적기입니다.",
                "다양한 사람들과의 교류가 새로운 기회를 가져옵니다.",
                "새로운 기술이나 트렌드를 익히기에 좋은 날입니다.",
                "아이디어가 샘솟습니다. 메모하는 습관을 잊지 마세요.",
                "당신의 재치 있는 말 한마디가 분위기를 반전시킵니다."
            ],
            calm: [
                "객관적인 시선이 필요합니다. 한 발자국 물러서서 관망하세요.",
                "지적인 호기심이 왕성해집니다. 책을 읽거나 강의를 들어보세요.",
                "논리적인 사고가 감정적인 혼란을 잠재워 줄 것입니다.",
                "가벼운 산책이나 드라이브가 머리를 맑게 해줍니다.",
                "분석적인 접근보다는 넓은 시야로 전체를 조망하세요.",
                "자유로운 영혼처럼 구속받지 않는 시간을 가져보세요."
            ],
            caution: [
                "유연함이 무기입니다. 계획이 바뀌어도 당황하지 마세요.",
                "토론과 논쟁을 즐기되, 감정싸움으로 번지지 않게 주의하세요.",
                "말 한마디에 천냥 빚을 갚거나 만들 수 있습니다. 신중하세요.",
                "얇은 귀가 되지 않도록 중심을 잡는 것이 중요합니다.",
                "비현실적인 공상에 빠지지 않도록 현실을 직시하세요."
            ],
            neutral: [
                "고정관념을 버리고 자유롭게 상상의 나래를 펼쳐보세요.",
                "중립적인 태도를 유지하세요. 어느 한쪽으로 치우치지 마세요.",
                "변화에 민감하게 반응하되, 중심은 잃지 않도록 하세요.",
                "협력과 조화가 혼자 하는 것보다 더 큰 성과를 냅니다.",
                "네트워크를 확장하세요. 사람이 곧 자산입니다."
            ]
        },
        water: {
            active: [
                "예술적인 영감이 샘솟습니다. 그림을 그리거나 글을 써보세요.",
                "직관력이 최고조에 달합니다. 머리보다 가슴을 따르세요.",
                "상상력이 현실이 될 수 있습니다. 긍정적인 꿈을 꾸세요.",
                "사랑과 연민의 마음으로 세상을 바라보면 아름다워 보입니다.",
                "창의적인 활동이 당신의 에너지를 충전해 줍니다.",
                "깊은 공감 능력이 관계를 더욱 돈독하게 만듭니다."
            ],
            calm: [
                "흐르는 물처럼 순리대로 맡기세요. 억지로 하려 하지 마세요.",
                "혼자만의 시간을 가지며 내면을 정화하는 것이 좋습니다.",
                "무의식의 세계를 탐구해보세요. 명상이나 요가가 좋습니다.",
                "감수성이 풍부해지는 날, 슬픈 영화 한 편이 위로가 됩니다.",
                "조용히 흐르는 강물처럼 평정심을 유지하세요.",
                "치유의 에너지가 강한 날입니다. 몸과 마음을 돌보세요."
            ],
            caution: [
                "감정의 파도가 칠 수 있습니다. 오늘은 마음의 소리를 경청하세요.",
                "과거의 기억이 떠오르더라도 얽매이지 말고 흘려보내세요.",
                "주변의 분위기에 휩쓸리지 말고 자신의 중심을 잡으세요.",
                "우울감이 찾아올 수 있으니 햇볕을 쬐는 것이 좋습니다.",
                "남의 감정을 자신의 것으로 착각하지 마세요. 경계를 지키세요."
            ],
            neutral: [
                "꿈자리가 선명하거나 예감이 적중할 수 있습니다.",
                "누군가를 위로할 때 당신의 마음도 함께 치유됩니다.",
                "당신의 친절과 배려가 결국 자신에게 돌아옵니다.",
                "비밀을 지키세요. 신비로움이 당신의 매력입니다.",
                "물 흐르듯 유연하게 대처하면 어떤 장애물도 넘을 수 있습니다."
            ]
        }
    },
    // 3. Situational Closing (상황별 마무리)
    closings: [
        "오늘 하루는 자신에게 작은 선물을 해도 좋습니다. 별들의 배치가 당신의 자아 존중을 높이는 시기를 가리키고 있으니, 오래 갖고 싶었던 것을 선물하면 운이 상승합니다.",
        "저녁에는 스마트폰을 멀리하고 명상의 시간을 가져보세요. 달이 당신의 정신궁을 지나며 고요한 에너지를 전하고 있으니, 내면의 소리를 들으면 길이 보입니다.",
        "오랜 친구에게 안부 문자를 보내면 뜻밖의 기쁨이 있습니다. 수성이 당신의 소통궁에 들어와 잊고 지낸 인연이 다시 빛을 발하며, 그로부터 좋은 소식이 올 징조가 보입니다.",
        "중요한 결정은 내일 아침으로 미루는 것이 현명합니다. 지금 화성이 역행 중이라 성급한 판단은 후회를 부르니, 하루 더 기다리면 명확한 답이 나타날 것입니다.",
        "오늘 마시는 커피 한 잔이 유난히 달콤할 것입니다. 금성이 당신의 감각궁을 자극하여 일상의 작은 즐거움이 배가되는 시간이니, 천천히 음미하며 순간을 즐기세요.",
        "집이나 책상 주변을 정리하면 머릿속도 맑아집니다. 토성이 구조와 질서의 에너지를 보내고 있어, 외부를 정돈하면 내면의 혼란도 함께 정리되는 시기입니다.",
        "예상치 못한 칭찬을 듣게 될 수 있으니 미소를 준비하세요. 목성이 당신의 명예궁을 통과하며 인정받을 일이 생기고, 그 칭찬이 자신감으로 이어져 더 큰 기회를 부를 것입니다.",
        "오늘의 작은 실수는 더 큰 성공을 위한 밑거름입니다. 천왕성의 영향으로 예기치 않은 변화가 있지만, 이는 당신을 성장시키기 위한 우주의 배려이니 너그럽게 받아들이세요.",
        "잠들기 전, 오늘 하루 감사했던 일 세 가지를 떠올려보세요. 달이 당신의 정서궁에 있어 감사의 마음이 긍정 에너지를 증폭시키고, 그 파동이 내일의 행운을 끌어당깁니다.",
        "당신의 미소가 누군가의 하루를 밝혀줄 수 있습니다. 태양이 당신의 관계궁을 비추며 당신의 긍정 에너지가 주변에 큰 영향을 미치니, 밝은 표정으로 세상과 마주하세요.",
        "오늘밤 꿈속에서 멋진 영감을 얻을지도 모릅니다. 해왕성이 당신의 무의식궁을 자극하여 꿈이 메시지를 전할 것이니, 아침에 꿈 내용을 기억해두면 해답을 찾을 수 있습니다.",
        "따뜻한 목욕으로 하루의 피로를 씻어내세요. 물의 원소가 당신을 정화하는 시간이며, 몸의 긴장이 풀리면 막혔던 운의 흐름도 다시 순조로워질 것입니다.",
        "내일은 오늘보다 더 빛나는 하루가 될 것입니다. 별자리의 운행이 상승 곡선을 그리며 당신에게 유리하게 작용하고 있으니, 희망을 품고 내일을 기대하세요.",
        "자신을 너무 몰아세우지 마세요. 당신은 충분히 잘하고 있습니다. 토성의 압박이 느껴지더라도 지금의 속도가 당신에게 맞는 템포이니, 자신을 믿고 천천히 나아가세요.",
        "하늘을 한번 올려다보세요. 별들이 당신을 응원합니다. 우주는 당신의 편이며 천체들이 조화롭게 배치되어 당신의 노력을 지켜보고 있으니, 외롭지 않다는 것을 기억하세요.",
        "좋아하는 음악을 들으며 하루를 마무리하는 여유를 가지세요. 금성의 예술적 에너지가 당신을 감싸며 아름다운 선율이 영혼을 치유하고, 내일을 위한 에너지를 충전해줄 것입니다.",
        "작은 친절이 큰 행복으로 돌아오는 것을 잊지 마세요. 카르마의 법칙이 작동하는 시기라 베푼 만큼 돌려받게 되니, 오늘 행한 선행이 미래의 복으로 저축됩니다.",
        "걱정은 잠시 내려놓고 편안한 휴식을 취하세요. 달이 당신의 안식궁에 머물러 마음의 평화를 선사하니, 오늘만큼은 모든 것을 손에서 내려놓고 쉬어도 괜찮습니다.",
        "당신의 존재만으로도 세상은 더 아름다워집니다. 태양이 당신의 정체성을 빛나게 하는 위치에 있어, 있는 그대로의 당신이 이미 완벽하며 누군가에게 빛이 되고 있습니다.",
        "오늘 걷는 이 길이 결국 꽃길로 이어질 것입니다. 목성이 당신의 여정궁을 지나며 모든 경험이 축복으로 변하는 시기이니, 지금의 고난도 아름다운 결실을 위한 과정입니다.",
        "마음의 짐을 덜어내면 내일 더 가볍게 날아오를 수 있습니다. 명왕성이 변화를 촉구하며 불필요한 집착을 버리라 속삭이니, 놓아줄 용기가 새로운 시작을 가져올 것입니다.",
        "거울을 보고 스스로에게 '수고했어'라고 말해주세요. 수성이 자기 사랑의 에너지를 전하며 스스로를 격려하는 말이 강력한 주문이 되어, 자존감이 높아지고 운이 트이기 시작합니다.",
        "사랑하는 사람과 함께하는 저녁 식사가 최고의 보약입니다. 금성이 당신의 가정궁을 축복하며 소중한 이들과의 시간이 영혼을 채우니, 함께 나누는 식사가 관계운을 높입니다.",
        "지금의 어려움은 곧 지나가는 소나기일 뿐입니다. 화성의 시련이 곧 끝나고 태양이 다시 밝게 비출 것이니, 비가 그치면 반드시 무지개가 뜨듯 행운이 찾아옵니다.",
        "당신의 잠재력은 아직 다 깨어나지 않았습니다. 기대하세요. 천왕성이 당신의 재능궁을 활성화하며 숨겨진 능력이 서서히 드러나는 시기이니, 자신의 가능성을 믿고 도전하세요.",
        "오늘 배운 교훈이 먼 훗날 큰 지혜가 될 것입니다. 토성이 시험을 통해 가르침을 주는 시간이며, 지금의 경험이 쌓여 나중에 인생의 나침반이 되어 올바른 방향을 알려줄 것입니다.",
        "평온한 마음으로 잠자리에 들면 내일 아침이 상쾌합니다. 달이 당신의 휴식궁을 지나며 깊은 수면을 선사하니, 마음을 비우고 누우면 잠이 약이 되어 내일의 활력을 줍니다.",
        "행운은 준비된 자에게 찾아온다는 것을 기억하세요. 목성이 기회의 문을 열고 있지만 노력 없이는 잡을 수 없으니, 꾸준히 준비하면 때가 왔을 때 단번에 잡을 수 있습니다.",
        "당신의 따뜻한 말 한마디가 세상을 바꿉니다. 수성이 언어의 힘을 증폭시키는 위치에 있어, 오늘 전하는 위로와 격려가 나비효과처럼 퍼져나가 큰 변화를 일으킬 것입니다.",
        "오늘 하루도 당신의 인생이라는 책의 멋진 한 페이지였습니다. 모든 순간이 이야기가 되고 있으며, 지금 쓰고 있는 이 장(章)이 나중에 가장 감동적인 부분으로 기억될 것입니다.",
        "내일의 태양은 당신을 위해 다시 떠오를 것입니다. 우주의 순환은 멈추지 않고 매일 새로운 시작을 선물하니, 오늘이 아무리 힘들어도 내일은 새로운 가능성으로 가득합니다.",
        "편안한 밤 되세요. 우주가 당신을 지켜줍니다. 별들이 당신의 수호자가 되어 밤새 평안을 지켜줄 것이니, 안심하고 깊은 잠에 빠져 영혼을 충전하세요.",
        "오늘은 직관이 특히 예리해지는 날입니다. 해왕성이 당신의 영감궁을 자극하니 첫 느낌을 믿고 따르면 정답을 찾을 것이며, 머리보다 가슴의 목소리에 귀 기울이세요.",
        "예상치 못한 만남이 새로운 기회를 가져올 것입니다. 금성과 목성이 당신의 인연궁에서 만나 우연처럼 보이는 만남이 운명이 될 수 있으니, 모든 만남에 열린 마음으로 임하세요.",
        "재물운이 서서히 상승하는 기운이 느껴집니다. 목성이 당신의 재물궁으로 이동하며 금전적 여유가 생기기 시작하니, 작은 횡재나 보너스 소식에 귀를 열어두세요.",
        "오늘은 과거의 상처를 치유할 수 있는 날입니다. 키론이 당신의 치유궁을 지나며 오래된 아픔이 녹아내리는 시간이니, 용서하고 놓아주면 마음이 가벼워질 것입니다.",
        "당신의 창의력이 폭발하는 시기가 왔습니다. 천왕성이 독창성의 에너지를 쏟아내며 새로운 아이디어가 샘솟으니, 떠오르는 영감을 즉시 메모해두면 큰 프로젝트로 이어집니다.",
        "사랑하는 이와의 관계가 한층 깊어지는 시간입니다. 금성이 당신의 애정궁을 축복하며 진심이 통하는 대화가 가능하니, 솔직한 마음을 표현하면 관계가 새로운 단계로 발전합니다.",
        "건강에 특별히 신경 써야 할 시기입니다. 화성이 당신의 건강궁을 통과하며 몸이 보내는 신호에 주의를 기울여야 하니, 작은 이상 증상도 가볍게 여기지 말고 점검하세요.",
        "오늘은 용기를 내어 도전할 때입니다. 화성이 행동의 에너지를 불어넣으며 두려움을 이길 힘을 주고 있으니, 망설였던 일에 첫발을 내딛으면 길이 열릴 것입니다.",
        "가족과의 시간이 특별히 소중한 날입니다. 달이 당신의 가정궁에 머물며 뿌리와 연결되는 시간을 선사하니, 부모님께 전화 한 통이나 가족 식사가 큰 위안이 될 것입니다.",
        "오래된 습관을 바꿀 절호의 기회입니다. 명왕성이 변화의 에너지를 강하게 보내며 낡은 패턴을 깨뜨릴 힘을 주니, 지금 새로운 습관을 시작하면 쉽게 자리 잡을 것입니다.",
        "직장에서 인정받을 일이 생길 조짐이 보입니다. 태양이 당신의 커리어궁을 비추며 노력이 빛을 발하는 시기이니, 성실하게 임하면 승진이나 중요한 역할을 맡게 될 것입니다.",
        "혼자만의 시간이 필요한 날입니다. 토성이 경계의 에너지를 보내며 타인과의 거리가 필요함을 알리니, 오늘은 사회적 모임을 피하고 혼자 재충전하는 것이 현명합니다.",
        "뜻밖의 소식이 기쁨을 가져다줄 것입니다. 수성이 당신의 소통궁에서 활발히 움직이며 좋은 소식을 전달하니, 오후쯤 도착할 연락이나 메시지를 기대해도 좋습니다.",
        "오늘은 베푸는 것이 받는 것보다 복됩니다. 목성이 선행의 에너지를 증폭시키며 나눔이 배로 돌아오는 시기이니, 작은 기부나 봉사가 예상치 못한 행운을 부를 것입니다.",
        "진실을 마주할 용기가 필요한 순간입니다. 명왕성이 깊은 통찰을 요구하며 회피했던 문제와 직면하라 속삭이니, 진실을 받아들이면 비로소 자유로워질 수 있습니다.",
        "여행이나 이동이 행운을 가져오는 날입니다. 목성이 당신의 여행궁을 지나며 먼 곳으로의 이동이 새로운 기회를 열어주니, 출장이나 여행 제안이 있다면 받아들이세요.",
        "감정이 풍부해지는 시기입니다. 달이 당신의 감성궁을 자극하며 예술 작품이나 음악에 깊이 공감하게 되니, 영화나 공연을 보면 영혼이 울림을 받아 카타르시스를 경험합니다.",
        "협상이나 계약이 유리하게 풀리는 시간입니다. 수성이 당신의 거래궁에서 순행하며 말의 설득력이 높아지니, 중요한 논의가 있다면 오늘 진행하면 좋은 결과를 얻습니다.",
        "오래된 꿈을 다시 꺼내볼 때입니다. 해왕성이 당신의 희망궁을 깨우며 포기했던 꿈이 다시 현실이 될 가능성을 보여주니, 과거의 열정을 돌아보고 재도전을 고려하세요.",
        "경쟁에서 유리한 위치를 점하게 됩니다. 화성이 당신의 승리궁에 들어와 투지가 불타오르며 경쟁자를 앞서는 힘이 생기니, 시험이나 경쟁 상황에서 좋은 성과를 거둘 것입니다.",
        "비밀이 드러날 수 있으니 조심하세요. 명왕성이 숨겨진 것을 수면 위로 끌어올리는 에너지를 발산하니, 감추고 있던 일이 있다면 미리 대비하거나 솔직해지는 것이 낫습니다.",
        "배움의 기회가 찾아오는 시기입니다. 수성이 당신의 학습궁을 자극하며 새로운 지식을 흡수하기 좋은 때이니, 강의나 세미나에 참여하면 평소보다 빠르게 이해하고 성장합니다.",
        "인내심이 시험받는 날입니다. 토성이 참을성을 요구하며 당장 결과가 나오지 않아도 기다려야 하는 상황이 오니, 조급해하지 말고 천천히 진행하면 결국 좋은 결실을 맺습니다.",
        "유머 감각이 빛을 발하는 날입니다. 목성이 당신의 표현궁을 지나며 재치 있는 말 한마디가 분위기를 밝게 만들고, 그로 인해 주변 사람들이 당신에게 호감을 느끼게 될 것입니다.",
        "과거의 인연이 다시 나타날 징조가 있습니다. 노스노드가 당신의 인연궁을 지나며 잊고 지냈던 사람이 연락을 해올 수 있으니, 그 만남이 새로운 협력이나 우정으로 이어질 수 있습니다.",
        "재능을 발휘할 무대가 주어집니다. 태양이 당신의 재능궁을 비추며 숨겨진 능력을 보여줄 기회가 생기니, 주저하지 말고 나서면 예상 이상의 박수와 인정을 받게 될 것입니다.",
        "직관을 무시하지 마세요. 해왕성이 내면의 목소리를 크게 만들며 영적 안테나가 예민해지는 시기이니, 논리로 설명되지 않아도 느낌이 강하게 오는 것은 따를 가치가 있습니다.",
        "변화의 바람이 불어오고 있습니다. 천왕성이 당신의 변화궁에서 혁명의 에너지를 일으키며 익숙한 것에서 벗어날 때가 왔으니, 새로운 환경이나 방식을 두려워하지 말고 받아들이세요.",
        "감사의 마음이 기적을 부릅니다. 목성이 풍요의 에너지를 전하며 가진 것에 감사하면 더 많은 축복이 찾아오니, 오늘 하루 작은 것에도 감사를 표현하며 살아보세요.",
        "용서가 당신을 자유롭게 할 것입니다. 키론이 치유의 에너지를 보내며 원망을 놓아주면 마음의 짐이 내려가니, 과거에 상처 준 사람을 용서하면 당신 자신이 가장 큰 치유를 받습니다.",
        "새로운 프로젝트를 시작하기 좋은 날입니다. 화성이 행동력을 극대화하며 시작의 에너지가 충만하니, 미루던 일을 오늘 시작하면 추진력이 붙어 빠르게 진행될 것입니다.",
        "오늘은 침묵이 금입니다. 수성이 역행하는 영향으로 말실수가 오해를 부를 수 있으니, 중요한 대화는 미루고 신중하게 말을 선택하며, 듣는 것에 더 집중하는 것이 현명합니다.",
        "재정 계획을 세우기 좋은 시기입니다. 토성이 당신의 재정궁을 안정시키며 장기적인 계획을 세울 지혜를 주니, 오늘 예산을 정리하고 저축 계획을 만들면 미래가 든든해집니다.",
        "사교 활동이 행운을 부릅니다. 금성이 당신의 사교궁을 활성화하며 파티나 모임에서 중요한 인맥을 만나게 되니, 초대를 거절하지 말고 적극적으로 참여하면 좋은 인연을 맺습니다.",
        "예술적 영감이 샘솟는 날입니다. 해왕성이 창조의 에너지를 쏟아내며 그림, 글쓰기, 음악 등 창작 활동을 하면 평소보다 뛰어난 작품이 나오니, 예술적 충동이 느껴지면 즉시 표현하세요.",
        "경계를 분명히 할 필요가 있습니다. 토성이 한계를 설정하라고 속삭이며 무리한 요구에 'No'라고 말해야 할 때이니, 타인의 눈치를 보지 말고 자신을 보호하는 것이 우선입니다.",
        "놀라운 반전이 기다리고 있습니다. 천왕성이 예상 밖의 전개를 예고하며 포기하려던 일이 갑자기 풀리거나, 불가능해 보이던 것이 현실이 되는 놀라움을 경험하게 될 것입니다.",
        "내면의 힘을 발견하는 날입니다. 명왕성이 당신의 파워궁을 지나며 자신도 몰랐던 강인함과 회복력이 드러나니, 어려운 상황에서도 이겨낼 힘이 이미 내 안에 있음을 깨닫게 됩니다.",
        "행운의 색은 오늘 파란색입니다. 금성이 파란색의 파장과 공명하며 이 색을 입거나 지니면 긍정적인 에너지가 증폭되니, 파란 옷이나 액세서리를 선택하면 운이 따를 것입니다.",
        "약속이나 계획에 변동이 생길 수 있습니다. 수성이 혼란의 에너지를 발산하며 일정이 꼬이거나 연기될 수 있으니, 유연하게 대처하고 플랜 B를 준비해두면 당황하지 않고 대응할 수 있습니다.",
        "숨은 재능이 발견될 시기입니다. 목성이 당신의 잠재력궁을 확장하며 몰랐던 능력이 우연한 계기로 드러나니, 새로운 분야에 도전해보면 뜻밖의 소질을 발견하게 될 것입니다.",
        "오늘은 말보다 행동으로 보여줄 때입니다. 화성이 실천의 에너지를 강하게 보내며 말만 하고 안 하는 것보다 작은 실천 하나가 신뢰를 쌓으니, 약속을 행동으로 옮기면 인정받습니다.",
        "정신적 성숙이 찾아오는 순간입니다. 토성이 성숙의 에너지를 전하며 과거의 유치한 반응에서 벗어나 어른스러운 대응을 하게 되니, 이는 당신의 영적 성장을 의미하는 신호입니다.",
        "우정이 사랑으로 발전할 수 있습니다. 금성이 당신의 우정궁에서 애정궁으로 이동하며 오랜 친구에게서 특별한 감정이 싹트거나, 친구의 소개로 운명적인 만남을 가질 수 있습니다.",
        "과거로부터 배울 교훈이 있습니다. 토성이 회고의 에너지를 보내며 예전 실수를 돌아보면 지금 필요한 답을 찾을 수 있으니, 일기나 오래된 메시지를 다시 읽어보면 깨달음이 옵니다.",
        "경제적 독립에 한 걸음 다가갑니다. 목성이 당신의 자립궁을 축복하며 스스로 서는 힘이 커지는 시기이니, 오늘 세운 재정 계획이나 결단이 미래의 안정된 삶을 만드는 초석이 됩니다.",
        "휴식은 사치가 아닌 필수입니다. 달이 당신의 에너지가 바닥났음을 알리며 쉬어야 다시 일어설 힘이 생기니, 죄책감 없이 충분히 쉬고 재충전하면 다음 주에 더 강하게 돌아옵니다."
    ]
};

const EASTERN_TEMPLATES = {
    // 1. Iljin Intro (일진/기운 묘사)
    iljin: [
        "오늘은 기상(氣像)이 맑고 청명하여 만물이 소생하는 날입니다.",
        "안개가 낀 듯 흐릿하나 곧 걷히고 해가 뜰 형상입니다.",
        "강한 바람이 불어오니 중심을 잡고 버텨야 하는 날입니다.",
        "비 온 뒤 땅이 굳어지듯, 시련 뒤에 결실이 맺히는 형국입니다.",
        "잔잔한 호수에 돌을 던진 듯 파문이 일어나는 변화의 날입니다.",
        "오래된 나무가 깊게 뿌리를 내리듯 안정을 찾아가는 날입니다.",
        "불길이 맹렬하게 타오르듯 의욕이 넘치나 조절이 필요합니다.",
        "차가운 금속처럼 이성적이고 냉철한 판단이 서는 날입니다.",
        "구름 사이로 한 줄기 빛이 내려오니 희망이 보이는 날입니다.",
        "대지가 품은 열기가 솟아오르듯 잠재력이 깨어나는 형상입니다.",
        "흐르는 물이 바다에 닿듯, 노력의 결과가 드넓게 펼쳐집니다.",
        "바위 틈에서 피어난 꽃처럼 강인한 생명력이 느껴지는 하루입니다.",
        "가을 하늘처럼 높고 푸르니, 마음의 여유가 깃들 것입니다.",
        "겨울잠에서 깨어난 개구리처럼 활기찬 움직임이 시작됩니다.",
        "용이 승천하듯 기운이 힘차게 솟구치는 길일입니다.",
        "달빛이 연못을 비추듯 은은하고 평화로운 기운이 감돕니다.",
        "천둥이 치고 비가 내리니 변화의 조짐이 강하게 나타납니다.",
        "산 정상에 올라 세상을 굽어보듯 시야가 넓어지는 날입니다.",
        "씨앗이 단단한 껍질을 깨고 싹을 틔우는 인내가 필요합니다.",
        "황금 들판에 곡식이 무르익듯 풍요로운 결실이 예상됩니다.",
        "새벽 닭이 울어 아침을 알리듯, 새로운 시작을 알리는 징조입니다.",
        "노을이 붉게 물들듯 열정적인 마무리가 중요한 날입니다.",
        "깊은 산속 옹달샘처럼 맑은 정신을 유지하는 것이 좋습니다.",
        "거친 파도를 헤치고 나가는 배처럼 도전적인 자세가 필요합니다.",
        "이슬비가 옷을 적시듯, 서서히 스며드는 행운이 있습니다.",
        "대나무처럼 곧고 바른 마음가짐이 귀인을 부르는 형상입니다.",
        "모닥불처럼 주위를 따뜻하게 밝히는 긍정의 힘이 넘칩니다.",
        "별들이 길을 안내하듯, 직감이 당신을 옳은 곳으로 이끕니다.",
        "단단한 흙을 뚫고 나오는 새싹의 기상을 본받아야 할 때입니다.",
        "강물이 굽이치며 바다로 향하듯, 인생의 여정을 즐기십시오.",
        "오래 묵힌 장맛처럼 깊이 있는 지혜가 빛을 발하는 날입니다.",
        "하늘과 땅의 기운이 조화를 이루니 매사가 순조롭습니다."
    ],
    // 2. Compatibility Logic (상생/상극에 따른 풀이 - 20개씩)
    harmony: [ // 상생 (Good)
        "귀인이 동쪽에서 찾아오니 막힌 일이 술술 풀립니다.",
        "물 들어올 때 노 젓는 격이라, 하는 일마다 성과가 따릅니다.",
        "주변 사람들과의 합(合)이 좋아 협업하기에 최적의 날입니다.",
        "생각지도 못한 재물이나 먹을 복이 따르는 운수입니다.",
        "당신의 기운이 상승 기류를 탔으니 자신감을 가져도 좋습니다.",
        "가뭄에 단비가 내리듯, 기다리던 소식을 듣게 될 것입니다.",
        "손을 대는 일마다 금으로 변하는 미다스의 손이 되는 날입니다.",
        "천군만마를 얻은 듯 든든한 조력자가 나타날 수 있습니다.",
        "순풍에 돛을 단 배처럼 거침없이 나아가는 하루입니다.",
        "작은 노력으로 큰 결실을 맺으니 가성비 최고의 날입니다.",
        "당신의 말 한마디가 천냥 빚을 갚는 마법을 부립니다.",
        "오랜 오해나 갈등이 눈 녹듯 사라지는 화해의 기운입니다.",
        "뜻밖의 행운이 선물처럼 찾아오니 설레는 마음으로 기다리세요.",
        "오늘의 투자는 훗날 큰 이익으로 돌아올 것입니다.",
        "주변의 칭찬과 인정을 받으니 어깨가 으쓱해지는 날입니다.",
        "무엇을 하든 운이 따르니, 망설였던 일에 도전해보세요.",
        "마음이 편안하니 몸도 건강해지는 힐링의 하루입니다.",
        "좋은 인연을 만날 수 있으니 사람 많이 모이는 곳이 길합니다.",
        "당신의 아이디어가 빛을 발하여 모두를 놀라게 할 것입니다.",
        "하늘이 돕고 땅이 도우니 두려울 것이 없는 대길(大吉)입니다."
    ],
    conflict: [ // 상극 (Bad/Caution)
        "오늘은 돌다리도 두들겨 보고 건너야 하는 신중함이 필요합니다.",
        "의욕이 앞서 실수를 할 수 있으니 한 템포 쉬어가세요.",
        "가까운 사람과의 사소한 언쟁이 커질 수 있으니 말을 아끼세요.",
        "무리한 투자는 금물이며, 지금 가진 것을 지키는 것이 이익입니다.",
        "예상치 못한 변수가 생길 수 있으니 플랜 B를 준비하세요.",
        "급하게 서두르면 체할 수 있습니다. 천천히 꼭꼭 씹으세요.",
        "달콤한 유혹을 조심하세요. 겉보기와 다를 수 있습니다.",
        "자존심을 내세우다가 실속을 챙기지 못할 수 있습니다.",
        "오늘은 ‘아니오’라고 말하는 용기가 필요할 수 있습니다.",
        "중요한 계약이나 약속은 꼼꼼하게 다시 한번 확인하세요.",
        "건강에 유의하세요. 과로나 스트레스는 금물입니다.",
        "남의 떡이 더 커 보일 수 있지만, 가진 것에 만족하세요.",
        "구설수에 휘말릴 수 있으니 언행을 각별히 조심해야 합니다.",
        "계획대로 되지 않아도 실망하지 마세요. 전화위복이 될 수 있습니다.",
        "운전이나 기계 조작 시 각별한 주의가 요구됩니다.",
        "지출이 늘어날 수 있으니 지갑을 닫는 것이 현명합니다.",
        "감정 기복이 심해질 수 있습니다. 명상으로 마음을 다스리세요.",
        "고집을 부리면 고립될 수 있습니다. 귀를 열고 경청하세요.",
        "옛 실수나 좋지 않은 기억이 떠오르면 빨리 털어내세요.",
        "오늘은 잠시 멈춤 버튼을 누르고 휴식을 취하는 것이 상책입니다."
    ],
    neutral: [ // 평이 (Mid)
        "크게 좋지도 나쁘지도 않은 평온한 하루가 예상됩니다.",
        "흐르는 물처럼 무리하지 않고 순리대로 행하면 길합니다.",
        "소소한 행복에 감사하면 복이 절로 굴러들어옵니다.",
        "새로운 일보다는 하던 일을 꾸준히 마무리하는 것이 좋습니다.",
        "중용(中庸)의 미덕을 지키면 저녁에 마음이 편안할 것입니다.",
        "평범함 속에 비범함이 숨어 있습니다. 일상을 소중히 하세요.",
        "너무 튀지 않고 중간만 가도 성공하는 날입니다.",
        "오늘 하루는 무소식이 희소식이라 생각하세요.",
        "균형을 잡는 것이 중요합니다. 과유불급을 명심하세요.",
        "주변을 둘러보며 숨 고르기를 하기에 적당한 날입니다.",
        "큰 변화는 없지만, 그만큼 안정적인 하루가 될 것입니다.",
        "자신을 돌아보는 시간을 가지면 내일 더 성장할 수 있습니다.",
        "무리하지 않는 선에서 가벼운 운동이 활력을 줍니다.",
        "가까운 지인들과 담소를 나누며 스트레스를 푸세요.",
        "기다림의 미학이 필요한 날입니다. 조급해하지 마세요.",
        "현재 상태를 유지하는 것이 최선의 전략일 수 있습니다.",
        "객관적인 시각을 유지하면 실수를 줄일 수 있습니다.",
        "자연스러운 흐름에 몸을 맡기면 편안해집니다.",
        "오늘의 평온함이 내일의 도약을 위한 에너지 충전이 됩니다.",
        "적당한 거리두기가 인간관계를 부드럽게 합니다."
    ],
    // 3. Action Suggestion (실천 조언)
    actions: [
        "오늘은 붉은 기운이 강한 날이니 붉은색 계열의 옷이나 소품을 걸치면 화(火)의 기운을 받아 운세가 상승합니다.",
        "동쪽은 청룡의 방위로 새로운 시작을 상징하니, 동쪽으로 산책하면 목(木)의 기운을 받아 생명력이 높아집니다.",
        "차는 음(陰)의 기운을 지녀 마음을 진정시키니, 가족과 함께 차를 마시면 가정의 화목운이 올라갑니다.",
        "시간을 지키는 것은 천시(天時)를 아는 것이니, 약속보다 일찍 도착하면 시간의 덕을 얻어 하루 운이 트입니다.",
        "지갑은 재물의 집이니 깨끗이 정리하면 재물이 들어올 자리가 생기고, 묵은 것을 버려야 새것이 들어옵니다.",
        "조상과 어른을 공경하면 음덕(陰德)이 쌓이니, 가족이 함께 윗분께 안부를 드리면 가운(家運)이 상승합니다.",
        "긴 음식은 장수와 길운을 상징하니, 오늘은 국수나 면 요리를 드시면 길한 기운이 몸에 들어옵니다.",
        "하루를 감사로 마무리하면 복(福)이 쌓이니, 잠들기 전 감사한 일을 떠올리면 좋은 꿈자리를 얻게 됩니다.",
        "아침 첫 물 한 잔은 하루의 기운을 여는 의식이니, 따뜻한 물로 시작하면 양기(陽氣)가 온몸에 퍼집니다.",
        "공간이 어지러우면 기운이 막히니, 정돈된 공간에서 일하면 막힌 운이 풀리고 집중력이 생깁니다.",
        "계단을 오르는 것은 상승의 기운을 타는 것이니, 오늘은 계단을 이용하면 운세가 함께 올라갑니다.",
        "채소는 땅의 정기를 품고 있으니, 오늘은 채식 위주로 드시면 토(土)의 기운을 받아 몸이 안정됩니다.",
        "향은 공간의 기운을 정화하니, 좋은 향을 피우거나 뿌리면 나쁜 기운이 물러가고 좋은 기운이 들어옵니다.",
        "웃는 얼굴에는 복이 들어오니, 거울 앞에서 웃는 연습을 하면 관상이 밝아져 인복(人福)이 따릅니다.",
        "초목은 생명의 기운을 나누니, 집에 화분을 들이면 생기(生氣)가 돌고 가족의 건강운이 좋아집니다.",
        "해가 지기 전 귀가하면 양기를 보존하니, 일찍 들어와 가족과 시간을 보내면 가정운이 든든해집니다.",
        "묵은 물건은 기운을 정체시키니, 쓰지 않는 것을 버리면 새로운 운이 들어올 공간이 생깁니다.",
        "하늘을 보는 것은 천기(天氣)를 받는 것이니, 하늘 사진을 찍으면 막힌 시야와 답답한 운이 트입니다.",
        "몸을 움직이면 기혈이 순환하니, 식후 스트레칭으로 굳은 기운을 풀면 건강운이 상승합니다.",
        "음악은 기운을 조율하니, 평소 듣지 않던 음악을 들으면 정체된 운이 흐르고 새로운 기운을 받습니다.",
        "정성은 천지신명도 감동시키니, 손으로 쓴 글은 마음의 기운을 전하여 인연운을 높입니다.",
        "전자기기는 양기를 소모시키니, 스마트폰 사용을 줄이면 정신이 맑아지고 운기가 보존됩니다.",
        "방향에 따라 기운이 다르니, 남쪽으로 머리를 두고 자면 화의 기운을 받아 깊이 잠들게 됩니다.",
        "달은 음덕을 상징하니, 달빛 아래 소원을 빌면 하늘의 기운을 받아 원하는 바가 이루어집니다.",
        "발은 기운의 시작점이니, 따뜻한 물에 발을 담그면 막힌 기혈이 풀리고 피로가 사라집니다.",
        "익숙한 길에는 익숙한 운만 따르니, 새로운 길로 가면 새로운 기운과 인연을 만나게 됩니다.",
        "인연에도 때가 있으니, 오래된 연락처를 정리하면 진짜 필요한 인연만 남아 관계운이 맑아집니다.",
        "제철 음식은 자연의 정기를 담고 있으니, 제철 과일을 먹으면 천지의 기운을 받아 건강과 재운이 옵니다.",
        "책은 지혜의 기운을 담고 있으니, 서점이나 도서관에 가면 학문운과 지혜운이 높아집니다.",
        "말에는 영(靈)이 깃드니, 긍정의 말만 하면 좋은 기운이 쌓이고 액운이 물러갑니다.",
        "베푸는 자에게 복이 돌아오니, 작은 선행이라도 실천하면 음덕이 쌓여 나중에 큰 복으로 돌아옵니다.",
        "아침 햇살은 양기의 근원이니, 햇빛을 쬐며 심호흡하면 하루의 운기가 상승합니다.",
        "현관은 기운의 입구이니, 신발을 정돈하면 좋은 기운이 들어오고 나쁜 기운이 못 들어옵니다.",
        "물은 생명의 근원이니, 하루 여덟 잔을 마시면 탁한 기운이 씻겨나가고 수(水)의 기운을 받습니다.",
        "어른을 모시면 복록(福祿)이 쌓이니, 가족이 함께 식사를 대접하면 가문의 운이 번창합니다.",
        "환기는 기운의 순환이니, 창문을 열어 신선한 기운을 들이면 정체된 운이 흐르기 시작합니다.",
        "양보는 덕을 쌓는 일이니, 자리를 양보하면 보이지 않는 복이 쌓여 어려울 때 도움을 받습니다.",
        "식탁은 가족운의 중심이니, 함께 밥을 먹으면 가족 간 기운이 조화롭게 흐르고 화목해집니다.",
        "빌린 것을 갚는 것은 신의(信義)를 지키는 일이니, 제때 돌려주면 신용운과 재물운이 높아집니다.",
        "화장실은 탁기가 모이는 곳이니, 깨끗이 청소하면 나쁜 기운이 정화되고 건강운이 올라갑니다.",
        "사과는 막힌 인연을 푸는 열쇠니, 미룬 사과를 전하면 관계운이 풀리고 새로운 인연이 들어옵니다.",
        "공원은 목(木)의 기운이 강한 곳이니, 자연 속을 걸으면 생명력을 받아 스트레스가 해소됩니다.",
        "밤은 음기를 보충하는 시간이니, 일찍 자면 정신이 맑아지고 다음날 운이 밝아집니다.",
        "소금은 정화의 힘을 지니니, 소금물로 현관을 닦으면 액운이 제거되고 복이 들어올 길이 열립니다.",
        "낡은 것은 기운을 떨어뜨리니, 속옷이나 수건을 새것으로 바꾸면 개운(開運)하고 기분이 상쾌해집니다.",
        "냉장고는 재물의 창고이니, 유통기한 지난 것을 버리면 재물이 새는 구멍이 막혀 금전운이 좋아집니다.",
        "먼저 인사하는 사람에게 복이 오니, 밝게 인사하면 인복이 따르고 귀인을 만나게 됩니다.",
        "거울은 기운을 반사하니, 깨끗한 거울은 좋은 기운을 모으고 탁한 거울은 운을 흐리게 합니다.",
        "외부의 기운을 씻어내는 것이 중요하니, 귀가 후 손발을 씻으면 밖의 액운이 집으로 들어오지 않습니다.",
        "창은 빛의 통로이니, 베란다를 깨끗이 하면 밝은 기운이 들어와 집안 운세가 맑아집니다.",
        "흰색은 정화의 색이니, 흰색 옷을 입으면 탁한 기운이 정화되고 평온한 운이 찾아옵니다.",
        "경청은 덕을 쌓는 행위니, 상대 말을 끝까지 들으면 인덕(人德)이 쌓이고 관계운이 좋아집니다.",
        "밝은 빛은 음기를 쫓으니, 현관에 조명을 켜두면 어두운 기운이 물러가고 온기가 들어옵니다.",
        "시계는 시간의 흐름을 관장하니, 고장난 시계를 고치면 막힌 운이 다시 흐르기 시작합니다.",
        "약은 생명을 다스리는 것이니, 오래된 약을 정리하면 건강을 지키는 기운이 새롭게 들어옵니다.",
        "아침의 정돈은 하루의 기운을 여니, 이불을 개고 환기하면 양기가 충만하고 운이 상승합니다.",
        "엉킨 것은 운을 막으니, 전선을 정리하면 복잡한 마음이 풀리고 일이 순조롭게 풀립니다.",
        "소식(小食)은 장수의 비결이니, 조금 덜 먹으면 몸이 가벼워지고 건강운이 상승합니다.",
        "인사는 복을 부르는 주문이니, 이웃에게 밝게 인사하면 주변에 좋은 기운이 모여듭니다.",
        "빛은 양기이니, 저녁에 집안을 밝게 하면 어둠의 기운이 물러가고 가족운이 화목해집니다.",
        "식물은 생명의 기운을 나누니, 물을 주며 말을 건네면 생기가 돌고 집안이 번성합니다.",
        "보리차는 몸의 열을 식히니, 따뜻하게 마시면 화기(火氣)가 내려가고 마음이 평온해집니다.",
        "사진은 시간을 담는 그릇이니, 가족 사진을 보면 화목한 기운이 되살아나고 애정운이 높아집니다.",
        "깨진 물건은 흉기(凶氣)를 부르니, 빨리 버리면 나쁜 기운이 사라지고 좋은 운이 들어옵니다.",
        "매트는 기운을 거르는 것이니, 현관 매트를 햇볕에 말리면 탁한 기운이 정화되고 복이 들어옵니다.",
        "은은한 빛은 마음을 진정시키니, 저녁에 조명을 낮추면 음양이 조화롭고 숙면을 취하게 됩니다.",
        "감사는 복을 부르는 기운이니, 작은 일에도 감사를 표하면 보이지 않는 복이 쌓입니다.",
        "변기 뚜껑은 재물의 문이니, 닫아두면 재물이 빠져나가지 않고 금전운이 안정됩니다.",
        "노란색은 토(土)의 색으로 재물을 상징하니, 금색이나 노란색을 지니면 금전운이 상승합니다.",
        "청소는 액을 쓸어내는 의식이니, 먼지를 털어내면 탁한 기운이 사라지고 맑은 운이 들어옵니다.",
        "혈육의 정을 나누면 가운이 든든해지니, 친척과 안부를 나누면 집안 전체의 운이 상승합니다.",
        "신발은 행보를 담당하니, 신발장을 정리하면 앞길이 열리고 새로운 기회가 찾아옵니다.",
        "함께 일하면 협동의 덕이 쌓이니, 설거지를 함께하면 가족 간 기운이 조화롭고 화목해집니다.",
        "음악은 천지의 조화니, 좋은 음악을 들으면 어지러운 기운이 정돈되고 마음이 평안해집니다.",
        "녹색은 생명의 색이니, 녹색을 지니면 치유의 기운을 받아 건강운이 높아집니다.",
        "긍정의 말은 하늘에 닿으니, 잠들기 전 좋은 말을 나누면 천운(天運)이 도와 꿈자리가 편안합니다.",
        "시든 것은 쇠운(衰運)을 부르니, 죽은 식물을 치우면 생기가 돌고 새로운 운이 싹트기 시작합니다.",
        "기도는 천지신명과 통하는 길이니, 가족의 건강을 빌면 하늘의 가호를 받아 무탈하게 됩니다.",
        "감사는 복을 부르는 주문이니, 하루를 감사로 마무리하면 복이 쌓이고 내일의 운이 밝아집니다.",
        "현관은 복이 드나드는 문이니, 깨끗이 쓸면 복신(福神)이 들어오고 액신(厄神)이 물러갑니다."
    ]
};

const LUCKY_ITEMS = {
    colors: [
        "로열 블루", "포레스트 그린", "크림 베이지", "미드나잇 블랙", "버건디 레드", "머스타드 옐로우", "퓨어 화이트", "차콜 그레이",
        "라벤더 퍼플", "스카이 블루", "코랄 핑크", "민트 그린", "올리브 카키", "네이비", "초콜릿 브라운", "샴페인 골드",
        "실버", "로즈 골드", "터코이즈", "인디고", "바이올렛", "마젠타", "살몬", "테라코타",
        "아이보리", "샌드 베이지", "모카", "슬레이트 블루", "틸 그린", "피치", "레몬 옐로우",
        "애쉬 그레이", "오션 블루", "선셋 오렌지", "라임", "퍼시픽 블루", "딥 그린", "펄 화이트",
        "매트 블랙", "브론즈", "카멜", "와인", "딥 퍼플", "파스텔 핑크", "일렉트릭 블루",
        "네온 사인", "소프트 핑크", "웜 그레이", "쿨 그레이", "비비드 레드", "블랙 & 화이트"
    ],
    items: [
        "손목시계", "은반지", "다이어리", "향수", "텀블러", "이어폰", "안경/선글라스", "스카프/목도리",
        "작은 거울", "립밤", "핸드크림", "동전 지갑", "키링", "만년필", "노트북", "책 한 권",
        "모자", "헤어핀", "브로치", "팔찌", "목걸이", "발찌", "운동화", "구두",
        "가방", "파우치", "우산", "양말", "장갑", "손수건", "명함 지갑", "여권 케이스",
        "스마트워치", "태블릿", "보조 배터리", "USB 메모리", "마우스", "키보드", "헤드셋",
        "카메라", "필름 카메라", "폴라로이드", "사진 앨범", "액자", "화분", "꽃병", "캔들",
        "디퓨저", "인센스 스틱", "무드등", "알람 시계", "캘린더", "마스크", "손소독제", "영양제"
    ],
    foods: [
        "파스타", "비빔밥", "샌드위치", "초밥", "샐러드", "된장찌개", "과일 주스", "초콜릿",
        "피자", "햄버거", "치킨", "라면", "김밥", "떡볶이", "순대", "튀김",
        "스테이크", "리조또", "카레", "돈까스", "우동", "소바", "쌀국수", "팟타이",
        "타코", "부리또", "퀘사디아", "감자튀김", "어니언링", "치즈 케이크", "티라미수", "마카롱",
        "아이스크림", "요거트", "스무디", "밀크티", "아메리카노", "라떼", "카푸치노", "에이드",
        "와인", "맥주", "칵테일", "삼겹살", "갈비", "불고기", "제육볶음", "김치찌개",
        "순두부찌개", "부대찌개", "감자탕", "설렁탕", "갈비탕", "육개장", "미역국", "콩나물국"
    ],
    directions: [
        "동쪽", "서쪽", "남쪽", "북쪽", "남동쪽", "북서쪽", "남서쪽", "북동쪽",
        "현관 쪽", "창가 쪽", "가장 안쪽 자리", "출입구 근처", "높은 곳", "낮은 곳", "밝은 곳", "어두운 곳"
    ],
    numbers: [
        "1", "3", "7", "8", "9", "11", "24", "4", "5", "6", "10", "12", "13", "21", "33", "77",
        "0", "2", "14", "15", "16", "17", "18", "19", "20", "22", "23", "25", "26", "27", "28",
        "29", "30", "31", "44", "55", "66", "88", "99", "100"
    ]
};

// =============================================================================
// SECTION 4: ENGINE LOGIC
// =============================================================================

function getSeededRandom(seedString) {
    let h = 0x811c9dc5;
    for (let i = 0; i < seedString.length; i++) {
        h ^= seedString.charCodeAt(i);
        h = Math.imul(h, 0x01000193);
    }
    h >>>= 0;
    const load = (h / 4294967296);
    return load; // 0.0 ~ 1.0
}

function pick(array, seed) {
    const idx = Math.floor(getSeededRandom(seed) * array.length);
    return array[idx];
}

// ----------------------------------------------------
// Public Export 1: Western Horoscope
// ----------------------------------------------------
export function getDailyHoroscope(name, birthdate) {
    if (!birthdate) return null;

    const today = new Date();
    const dateStr = `${today.getFullYear()}${today.getMonth()}${today.getDate()}`;
    // Base Seed
    const seed = `${dateStr}-${name}-WESTERN`;

    // 1. Identify Sign & Element
    const signName = getZodiacName(birthdate);
    const zInfo = ZODIAC_SIGNS[signName];

    // 2. Simulate Planetary Aspect (Randomly select one for the day/user combo)
    const aspect = pick(PLANETARY_ASPECTS, seed + "aspect");

    // 3. Determine Advice Category based on Aspect Type
    let adviceCategory = "neutral";
    // Mapping Aspect Type -> Advice Category
    const categoryMap = {
        "challenge": "caution", // e.g., Mercury Retrograde -> Caution
        "harmony": "active",    // e.g., Venus Trine -> Active/Positive
        "energy": "active",     // e.g., Mars Conjunct -> Active
        "luck": "active",       // e.g., Jupiter Expansion -> Active
        "serious": "caution",   // e.g., Saturn Return -> Caution/Serious
        "emotion": "calm",      // e.g., Full Moon -> Calm/Emotion
        "vitality": "active"    // e.g., Solar Return -> Active
    };
    if (categoryMap[aspect.type]) {
        adviceCategory = categoryMap[aspect.type];
    } else {
        // Fallback or Random mix if type not found
        const cats = ["active", "calm", "caution", "neutral"];
        adviceCategory = pick(cats, seed + "cat_fallback");
    }

    // 4. Build Sentence Parts
    const transitText = pick(WESTERN_TEMPLATES.transits, seed + "transit");

    // Select advice from the specific Logic-based list
    const adviceList = WESTERN_TEMPLATES.adviceLogic[zInfo.element][adviceCategory];
    const adviceText = pick(adviceList, seed + "advice");

    const closingText = pick(WESTERN_TEMPLATES.closings, seed + "closing");

    // 5. Construct Full Text
    // Structure: [Transit Intro] + [Aspect Effect] + [Element Advice] + [Closing]
    // Clean, expert tone.
    let fullText = `${transitText} `;
    fullText += `오늘은 **${aspect.name}**의 영향으로 ${aspect.desc}입니다. `;
    fullText += `${adviceText} `;
    fullText += `${closingText}`;

    return {
        sign: signName,
        ruler: zInfo.ruler,
        element: zInfo.element,
        aspect: aspect.name,
        text: fullText
    };
}

// ----------------------------------------------------
// Public Export 2: Oriental Fortune
// ----------------------------------------------------
export function getDailyOrientalFortune(name, birthdate) {
    if (!birthdate) return null;

    const today = new Date();
    const dateStr = `${today.getFullYear()}${today.getMonth()}${today.getDate()}`;
    const seed = `${dateStr}-${name}-EASTERN`;

    // 1. Identify Zodiac & Element
    const zodiacName = getChineseZodiacName(birthdate);
    const myElementKey = ORIENTAL_ZODIAC[zodiacName]; // e.g., 'water'

    // 2. Simulate Daily Iljin (Day Element)
    const elementKeys = Object.keys(FIVE_ELEMENTS);
    const dailyElementKey = pick(elementKeys, "DAILY_ILJIN_" + dateStr);
    const dailyElement = FIVE_ELEMENTS[dailyElementKey];

    // 3. Determine Relational Status (Simple Harmony Logic)
    // Wood->Fire->Earth->Metal->Water->Wood
    const supportMap = { "wood": "fire", "fire": "earth", "earth": "metal", "metal": "water", "water": "wood" };
    const conflictMap = { "wood": "earth", "fire": "metal", "earth": "water", "metal": "wood", "water": "fire" };

    let status = "neutral";
    if (supportMap[myElementKey] === dailyElementKey || supportMap[dailyElementKey] === myElementKey) {
        status = "harmony";
    } else if (conflictMap[myElementKey] === dailyElementKey || conflictMap[dailyElementKey] === myElementKey) {
        status = "conflict";
    }

    // 4. Build Sentence Parts
    const introText = pick(EASTERN_TEMPLATES.iljin, seed + "iljin");
    // Pick specific advice based on harmony status
    let statusText = "";
    if (status === "harmony") statusText = pick(EASTERN_TEMPLATES.harmony, seed + "status");
    else if (status === "conflict") statusText = pick(EASTERN_TEMPLATES.conflict, seed + "status");
    else statusText = pick(EASTERN_TEMPLATES.neutral, seed + "status");

    const actionText = pick(EASTERN_TEMPLATES.actions, seed + "action");

    // 5. Construct Full Text
    // Structure: [Intro] + [So, status analysis] + [Action]
    let fullText = `${introText} `;
    fullText += `오늘의 일진인 **${dailyElement.name}** 기운이 당신과 만나 ${statusText} `;
    fullText += `${actionText}`;

    return {
        sign: zodiacName,
        element: myElementKey,
        dailyElement: dailyElement.name, // e.g. "화(火)"
        status: status,
        text: fullText
    };
}

// ----------------------------------------------------
// Public Export 3: Lucky Prescription
// ----------------------------------------------------
export function getLuckyPrescription(name, birthdate) {
    const today = new Date();
    const dateStr = `${today.getFullYear()}${today.getMonth()}${today.getDate()}`;
    const seed = `${dateStr}-${name}-LUCKY`;

    return {
        color: pick(LUCKY_ITEMS.colors, seed + "col"),
        item: pick(LUCKY_ITEMS.items, seed + "item"),
        food: pick(LUCKY_ITEMS.foods, seed + "food"),
        direction: pick(LUCKY_ITEMS.directions, seed + "dir"),
        number: pick(LUCKY_ITEMS.numbers, seed + "num")
    };
}

// ----------------------------------------------------
// Helpers
// ----------------------------------------------------
function getZodiacName(dateStr) {
    const date = new Date(dateStr);
    const m = date.getMonth() + 1;
    const d = date.getDate();

    if ((m == 3 && d >= 21) || (m == 4 && d <= 19)) return "양자리";
    if ((m == 4 && d >= 20) || (m == 5 && d <= 20)) return "황소자리";
    if ((m == 5 && d >= 21) || (m == 6 && d <= 21)) return "쌍둥이자리";
    if ((m == 6 && d >= 22) || (m == 7 && d <= 22)) return "게자리";
    if ((m == 7 && d >= 23) || (m == 8 && d <= 22)) return "사자자리";
    if ((m == 8 && d >= 23) || (m == 9 && d <= 22)) return "처녀자리";
    if ((m == 9 && d >= 23) || (m == 10 && d <= 22)) return "천칭자리";
    if ((m == 10 && d >= 23) || (m == 11 && d <= 22)) return "전갈자리";
    if ((m == 11 && d >= 23) || (m == 12 && d <= 21)) return "사수자리";
    if ((m == 12 && d >= 22) || (m == 1 && d <= 19)) return "염소자리";
    if ((m == 1 && d >= 20) || (m == 2 && d <= 18)) return "물병자리";
    return "물고기자리";
}

function getChineseZodiacName(dateStr) {
    const year = new Date(dateStr).getFullYear();
    const animals = ["원숭이띠", "닭띠", "개띠", "돼지띠", "쥐띠", "소띠", "호랑이띠", "토끼띠", "용띠", "뱀띠", "말띠", "양띠"];
    return animals[year % 12];
}
